# 智能设备自助接入系统

## 目录说明
1. /page
html存放目录

2. /src
源码存放目录，包含js、css等
2.1 /src/apps
该目录为app存放目录，划分标准是以/page目录里的html文件为准。一般一个html文件就是一个app
2.2 /src/config
该目录为配置文件存放目录
2.3 /src/core
该目录为核心js文件存放目录，修改时务必谨慎。如会对他人产生影响，务必通知到相关人员。
2.4 /src/libs
该目录为第三方库存放目录，一般不做修改
2.5 /src/modules
该目录为模块存放目录，可根据需要自行存放
2.6 /src/widgets
该目录为控件存放目录。**这里的控件特指供app调用的控件，请勿存放其它不相关控件**

3. /static
编译后的代码存放目录，该目录不需要手工操作，将由gulp构建工具自动生成并维护

4. /test
测试脚本存放目录，目前主要用于存放单元测试脚本

***********

## gulp构建命令
### 自动执行命令
目前设置了两个自动执行命令：
1. `gulp watch6` 为es6版的自动构建，可以构建es6代码及less、css
2. `gulp watch5` 为es5版的自动构建，不熟悉es6的可以用此命令，使用es5版的js编写app

### 发布命令
发布命令为`gulp release`，执行该命令后，将生成一个名为“ app-developer ”的目录。此目录即可直接提交至生产环境。

***********

## 控件开发注意事项
控件存放目录位于/src/widgets，每个控件都必须单独存放一个目录
控件开发完成后，需要添加到/src/widgets/list.js文件，这样playground程序才能搜寻到。并注意需要把ID号注释在后面，以供查询。ES6版添加方法如下：
```java
export {[WidgetName]} from './[WidgetPath]/index';    // ID: 1001
```
控件需指定scheme字段以供属性面板进行配置。该字段为数组类型，可选值如下：

| 选项     | 必选 | 说明
|----------|:----:|------------------
| caption  |  否  | 标题
| show     |  是  | 当前状态是否显示
| label    |  否  | 当前状态标识符
| image    |  否  | 需要上传图片
| text     |  否  | 控件说明
| status   |  否  | 需要接受运行数据
| event    |  否  | 需要发送控件数据
| color    |  否  | 字体颜色
| bold     |  否  | 字体加粗
| italic   |  否  | 斜体字
| size     |  否  | 字体大小
| multi[0] |  否  | 允许多个状态（后面的数字指定），如不配置该项或配置为0，表明可无限添加状态

***********

## 单元测试
目录采用的单元测试框架为karma + jasmine，运行`karma start`即可启动单元测试。
除在控制台可看到测试结果外，units.html文件也可查看详细测试报告。